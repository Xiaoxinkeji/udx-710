# æ’ä»¶å¼€å‘å®Œæ•´æŒ‡å— v2.1 (Geek Edition)

> æœ¬æ–‡æ¡£ä¸º UDX710-UOOLS æå®¢è¿›åŒ–ç‰ˆå®˜æ–¹æ’ä»¶å¼€å‘è§„èŒƒã€‚æœ¬ç³»ç»Ÿé‡‡ç”¨æ·±åº¦é‡æ„çš„ Web æ§åˆ¶å±‚ä¸ C åç«¯æ‰§è¡Œå¼•æ“ï¼Œä¸ºæ‚¨æä¾›ç›®å‰ MiFi ç”Ÿæ€ä¸­æœ€å®‰å…¨ã€æœ€é«˜æ•ˆçš„æ’ä»¶å¼€å‘ä½“éªŒã€‚

## ç›®å½•

1. [æ’ä»¶ç³»ç»Ÿæ¦‚è¿°](#1-æ’ä»¶ç³»ç»Ÿæ¦‚è¿°)
2. [æ’ä»¶ç»“æ„è§„èŒƒ](#2-æ’ä»¶ç»“æ„è§„èŒƒ)
3. [æ ¸å¿ƒAPIå‚è€ƒ](#3-æ ¸å¿ƒapiå‚è€ƒ)
4. [UIç»„ä»¶åº“](#4-uiç»„ä»¶åº“)
5. [ç”Ÿå‘½å‘¨æœŸé’©å­](#5-ç”Ÿå‘½å‘¨æœŸé’©å­)
6. [æŒä¹…åŒ–å­˜å‚¨](#6-æŒä¹…åŒ–å­˜å‚¨)
7. [å®Œæ•´ç¤ºä¾‹](#7-å®Œæ•´ç¤ºä¾‹)
8. [æœ€ä½³å®è·µ](#8-æœ€ä½³å®è·µ)

---

## 1. æ’ä»¶ç³»ç»Ÿæ¦‚è¿°

### 1.1 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (Vue 3)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PluginStore â”‚  â”‚ UIç»„ä»¶åº“    â”‚  â”‚ pluginAPI   â”‚     â”‚
â”‚  â”‚   .vue      â”‚  â”‚ plugin-*    â”‚  â”‚ æ³¨å…¥å¯¹è±¡    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ (Cè¯­è¨€)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ handlers.c  â”‚  â”‚ plugin_     â”‚  â”‚ http_server â”‚     â”‚
â”‚  â”‚ Shellæ‰§è¡Œ   â”‚  â”‚ storage.c   â”‚  â”‚ è·¯ç”±æ³¨å†Œ    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ’ä»¶æ–‡ä»¶ä½ç½®

- æ’ä»¶æ–‡ä»¶ï¼š`/home/root/6677/Plugins/*.js`
- å­˜å‚¨æ•°æ®ï¼š`/home/root/6677/Plugins/data/<æ’ä»¶å>.json`
- è„šæœ¬æ–‡ä»¶ï¼š`/home/root/6677/Plugins/scripts/*.sh`

---

## 2. æ’ä»¶ç»“æ„è§„èŒƒ


### 2.1 åŸºç¡€ç»“æ„æ¨¡æ¿

```javascript
/**
 * æ’ä»¶åç§° - ç®€çŸ­æè¿°
 * @version 1.0.0
 * @author ä½œè€…å
 */
window.PLUGIN = {
  // ========== å…ƒæ•°æ®ï¼ˆå¿…å¡«ï¼‰ ==========
  name: 'æ’ä»¶æ˜¾ç¤ºåç§°',           // æ˜¾ç¤ºåœ¨å•†åŸçš„åç§°
  version: '1.0.0',              // è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
  author: 'ä½œè€…å',              // ä½œè€…ä¿¡æ¯
  description: 'æ’ä»¶åŠŸèƒ½æè¿°',    // ç®€çŸ­æè¿°ï¼Œæ˜¾ç¤ºåœ¨å¡ç‰‡ä¸Š
  
  // ========== å…ƒæ•°æ®ï¼ˆå¯é€‰ï¼‰ ==========
  icon: 'fa-puzzle-piece',       // FontAwesomeå›¾æ ‡åï¼ˆä¸å«fa-å‰ç¼€ä¹Ÿå¯ï¼‰
  color: 'from-blue-500 to-cyan-400', // Tailwindæ¸å˜è‰²ç±»å
  
  // ========== æ¨¡æ¿ï¼ˆå¿…å¡«ï¼‰ ==========
  template: `
    <div class="space-y-4">
      <!-- æ’ä»¶UIå†…å®¹ -->
    </div>
  `,
  
  // ========== æ•°æ®ï¼ˆå¿…å¡«ï¼‰ ==========
  data() {
    return {
      // å“åº”å¼æ•°æ®
      loading: false,
      message: ''
    }
  },
  
  // ========== è®¡ç®—å±æ€§ï¼ˆå¯é€‰ï¼‰ ==========
  computed: {
    // æ´¾ç”Ÿæ•°æ®
    formattedMessage() {
      return this.message.toUpperCase()
    }
  },
  
  // ========== æ–¹æ³•ï¼ˆå¿…å¡«ï¼‰ ==========
  methods: {
    async myMethod() {
      // æ–¹æ³•å®ç°
    }
  },
  
  // ========== ç”Ÿå‘½å‘¨æœŸï¼ˆå¯é€‰ï¼‰ ==========
  mounted() {
    // æ’ä»¶åŠ è½½åæ‰§è¡Œ
  },
  
  destroyed() {
    // æ’ä»¶å…³é—­å‰æ‰§è¡Œ
  }
}
```

### 2.2 å­—æ®µè¯¦ç»†è¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `name` | String | âœ… | æ’ä»¶æ˜¾ç¤ºåç§°ï¼Œå»ºè®®2-10ä¸ªå­—ç¬¦ |
| `version` | String | âœ… | è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼Œå¦‚ `1.0.0` |
| `author` | String | âœ… | ä½œè€…åç§° |
| `description` | String | âœ… | åŠŸèƒ½æè¿°ï¼Œå»ºè®®20-50ä¸ªå­—ç¬¦ |
| `icon` | String | âŒ | FontAwesomeå›¾æ ‡ï¼Œå¦‚ `toolbox`ã€`fa-cog` |
| `color` | String | âŒ | Tailwindæ¸å˜è‰²ï¼Œå¦‚ `from-blue-500 to-cyan-400` |
| `template` | String | âœ… | Vueæ¨¡æ¿å­—ç¬¦ä¸² |
| `data` | Function | âœ… | è¿”å›å“åº”å¼æ•°æ®å¯¹è±¡çš„å‡½æ•° |
| `computed` | Object | âŒ | è®¡ç®—å±æ€§å¯¹è±¡ |
| `methods` | Object | âœ… | æ–¹æ³•å¯¹è±¡ |
| `mounted` | Function | âŒ | æŒ‚è½½åé’©å­ |
| `destroyed` | Function | âŒ | é”€æ¯å‰é’©å­ |

---

## 3. æ ¸å¿ƒAPIå‚è€ƒ

### 3.1 APIæ³¨å…¥æ–¹å¼

åœ¨æ’ä»¶æ–¹æ³•ä¸­ï¼Œé€šè¿‡ `this.$api` è®¿é—®æ‰€æœ‰APIï¼š

```javascript
methods: {
  async myMethod() {
    // è®¿é—®API
    const result = await this.$api.shell('uname -a')
    this.$api.toast('æ‰§è¡ŒæˆåŠŸ', 'success')
  }
}
```

### 3.2 Shellå‘½ä»¤æ‰§è¡Œ

```javascript
// å‡½æ•°ç­¾å
this.$api.shell(command: string): Promise<string>

// ç¤ºä¾‹
const result = await this.$api.shell('cat /etc/os-release')
const cpuUsage = await this.$api.shell("top -bn1 | grep 'Cpu(s)' | awk '{print $2}'")
```

### 3.3 æ¶ˆæ¯æç¤º

```javascript
// Toastæç¤ºï¼ˆè‡ªåŠ¨æ¶ˆå¤±ï¼‰
this.$api.toast(message: string, type?: 'info'|'success'|'error'|'warning')

// ç¤ºä¾‹
this.$api.toast('æ“ä½œæˆåŠŸ', 'success')
this.$api.toast('å‘ç”Ÿé”™è¯¯', 'error')
this.$api.toast('è­¦å‘Šä¿¡æ¯', 'warning')
this.$api.toast('æ™®é€šæç¤º')  // é»˜è®¤info
```

### 3.4 å¼¹çª—äº¤äº’

```javascript
// Alertå¼¹çª—ï¼ˆä»…æç¤ºï¼‰
this.$api.alert(title: string, message: string)

// Confirmç¡®è®¤æ¡†ï¼ˆè¿”å›Promise<boolean>ï¼‰
const confirmed = await this.$api.confirm(title: string, message: string)

// ç¤ºä¾‹
this.$api.alert('æç¤º', 'æ“ä½œå·²å®Œæˆ')

const ok = await this.$api.confirm('ç¡®è®¤', 'æ˜¯å¦åˆ é™¤æ­¤é¡¹ï¼Ÿ')
if (ok) {
  // ç”¨æˆ·ç‚¹å‡»ç¡®è®¤
}
```

### 3.5 æ‰§è¡Œè„šæœ¬

```javascript
// æ‰§è¡Œå·²ä¸Šä¼ çš„Shellè„šæœ¬
this.$api.runScript(scriptName: string): Promise<string>

// ç¤ºä¾‹ï¼ˆè„šæœ¬ä½äº /home/root/6677/Plugins/scripts/ï¼‰
const output = await this.$api.runScript('backup.sh')
```

### 3.6 æ•°æ®åˆ·æ–°

```javascript
// å¼ºåˆ¶åˆ·æ–°UIï¼ˆæ•°æ®å˜æ›´åè°ƒç”¨ï¼‰
this.$refresh()

// ç¤ºä¾‹
this.$data.loading = true
this.$refresh()  // ç«‹å³æ›´æ–°UI
```

### 3.7 æ•°æ®è®¿é—®

```javascript
// è®¿é—®å“åº”å¼æ•°æ®
this.$data.propertyName

// ç¤ºä¾‹
this.$data.loading = true
this.$data.message = 'Hello'
const value = this.$data.inputText
```

### 3.8 æå®¢å­ç³»ç»Ÿ API (NEW)

é€šè¿‡ä»¥ä¸‹ API è®¿é—®ç³»ç»Ÿçš„é«˜çº§æå®¢åŠŸèƒ½ï¼š

#### 3.8.1 æˆå°±ç³»ç»Ÿæ•°æ®
```javascript
// è·å–å½“å‰æ‰€æœ‰æˆå°±çš„çŠ¶æ€ä¸è¿›åº¦
const achievements = await this.$api.getAchievements()
// è¿”å›ç¤ºä¾‹: [{id: "uptime_pro", achieved: true, progress: 100}, ...]
```

#### 3.8.2 è‡ªåŠ¨åŒ–è§„åˆ™ç®¡ç†
```javascript
// è·å–æ‰€æœ‰è‡ªåŠ¨åŒ–è§„åˆ™
const rules = await this.$api.getAutomationRules()

// ä¿å­˜/æ›´æ–°è§„åˆ™
await this.$api.saveAutomationRule({
  id: 0, // 0 ä¸ºæ–°å»º
  name: "æˆ‘çš„è§„åˆ™",
  trigger: "temperature", // temperature, memory, uptime
  operator: ">",
  value: 45,
  action: "shell:reboot",
  enabled: 1
})

// åˆ é™¤è§„åˆ™
await this.$api.deleteAutomationRule(ruleId)
```

#### 3.8.3 è·å–èœ‚çªé‚»åŒº (æ‹“æ‰‘æ•°æ®)
```javascript
// è·å–å‘¨å›´åŸºç«™çš„ä¿¡å·åšå¼ˆæ•°æ®
const neighbors = await this.$api.getNeighborCells()
// è¿”å›ç¤ºä¾‹: [{tech: "LTE", cell_id: 123, rsrp: -95, ...}, ...]
```

---

## 4. UIç»„ä»¶åº“


### 4.1 ç»„ä»¶æ¦‚è§ˆ

| ç»„ä»¶ | ç”¨é€” | ä¸»è¦å±æ€§ |
|------|------|----------|
| `<plugin-card>` | å¡ç‰‡å®¹å™¨ | title, icon, loading, collapsible |
| `<plugin-status>` | çŠ¶æ€æ˜¾ç¤º | label, value, unit, status |
| `<plugin-btn>` | æŒ‰é’® | type, disabled, loading, icon |

### 4.2 plugin-card å¡ç‰‡ç»„ä»¶

ç»Ÿä¸€çš„å¡ç‰‡å®¹å™¨ï¼Œç”¨äºç»„ç»‡æ’ä»¶å†…å®¹ã€‚

```html
<plugin-card 
  title="å¡ç‰‡æ ‡é¢˜"
  icon="server"
  :loading="isLoading"
  :collapsible="true">
  <!-- å¡ç‰‡å†…å®¹ -->
</plugin-card>
```

**å±æ€§è¯´æ˜ï¼š**

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `title` | String | `''` | å¡ç‰‡æ ‡é¢˜ |
| `icon` | String | `''` | FontAwesomeå›¾æ ‡å |
| `loading` | Boolean | `false` | æ˜¾ç¤ºåŠ è½½åŠ¨ç”» |
| `collapsible` | Boolean | `false` | æ˜¯å¦å¯æŠ˜å  |

**å®Œæ•´ç¤ºä¾‹ï¼š**

```html
<!-- åŸºç¡€å¡ç‰‡ -->
<plugin-card title="ç³»ç»Ÿä¿¡æ¯">
  <p>å†…å®¹åŒºåŸŸ</p>
</plugin-card>

<!-- å¸¦å›¾æ ‡å’ŒåŠ è½½çŠ¶æ€ -->
<plugin-card title="CPUç›‘æ§" icon="microchip" :loading="loading">
  <div>CPU: {{ cpuUsage }}%</div>
</plugin-card>

<!-- å¯æŠ˜å å¡ç‰‡ -->
<plugin-card title="é«˜çº§è®¾ç½®" icon="cog" :collapsible="true">
  <div>è®¾ç½®å†…å®¹...</div>
</plugin-card>
```

### 4.3 plugin-status çŠ¶æ€ç»„ä»¶

ç”¨äºæ˜¾ç¤ºç›‘æ§é¡¹ï¼Œå¦‚CPUã€å†…å­˜ã€ç£ç›˜ç­‰çŠ¶æ€ã€‚

```html
<plugin-status 
  label="CPUä½¿ç”¨ç‡"
  :value="cpuUsage"
  unit="%"
  :status="cpuStatus" />
```

**å±æ€§è¯´æ˜ï¼š**

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `label` | String | å¿…å¡« | çŠ¶æ€æ ‡ç­¾ |
| `value` | String/Number | å¿…å¡« | çŠ¶æ€å€¼ |
| `unit` | String | `''` | å•ä½ï¼ˆå¦‚ %, MB, GBï¼‰ |
| `status` | String | `'default'` | çŠ¶æ€ç±»å‹ |

**statuså¯é€‰å€¼ï¼š**

| å€¼ | é¢œè‰² | ç”¨é€” |
|----|------|------|
| `success` | ç»¿è‰² | æ­£å¸¸/å¥åº·çŠ¶æ€ |
| `warning` | é»„è‰² | è­¦å‘ŠçŠ¶æ€ |
| `error` | çº¢è‰² | é”™è¯¯/å±é™©çŠ¶æ€ |
| `default` | ç°è‰² | é»˜è®¤/ä¸­æ€§çŠ¶æ€ |

**å®Œæ•´ç¤ºä¾‹ï¼š**

```html
<div class="space-y-2">
  <plugin-status label="CPU" :value="cpu" unit="%" :status="cpuStatus" />
  <plugin-status label="å†…å­˜" :value="memory" unit="%" :status="memStatus" />
  <plugin-status label="ç£ç›˜" :value="disk" unit="%" status="success" />
  <plugin-status label="è¿è¡Œæ—¶é—´" :value="uptime" status="default" />
</div>
```

**åŠ¨æ€çŠ¶æ€è®¡ç®—ç¤ºä¾‹ï¼š**

```javascript
computed: {
  cpuStatus() {
    if (this.cpu >= 90) return 'error'
    if (this.cpu >= 70) return 'warning'
    return 'success'
  }
}
```

### 4.4 plugin-btn æŒ‰é’®ç»„ä»¶

ç»Ÿä¸€é£æ ¼çš„æŒ‰é’®ç»„ä»¶ã€‚

```html
<plugin-btn 
  type="primary"
  icon="play"
  :loading="isRunning"
  :disabled="!canRun"
  @click="handleClick">
  æŒ‰é’®æ–‡å­—
</plugin-btn>
```

**å±æ€§è¯´æ˜ï¼š**

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `type` | String | `'primary'` | æŒ‰é’®ç±»å‹ |
| `icon` | String | `''` | FontAwesomeå›¾æ ‡å |
| `loading` | Boolean | `false` | æ˜¾ç¤ºåŠ è½½åŠ¨ç”» |
| `disabled` | Boolean | `false` | ç¦ç”¨çŠ¶æ€ |
| `block` | Boolean | `false` | æ˜¯å¦å æ»¡å®½åº¦ |

**typeå¯é€‰å€¼ï¼š**

| å€¼ | é¢œè‰² | ç”¨é€” |
|----|------|------|
| `primary` | ç´«è‰² | ä¸»è¦æ“ä½œ |
| `success` | ç»¿è‰² | æˆåŠŸ/ç¡®è®¤æ“ä½œ |
| `danger` | çº¢è‰² | å±é™©/åˆ é™¤æ“ä½œ |
| `default` | ç°è‰² | æ¬¡è¦æ“ä½œ |

**å®Œæ•´ç¤ºä¾‹ï¼š**

```html
<div class="flex flex-wrap gap-2">
  <!-- ä¸»è¦æŒ‰é’® -->
  <plugin-btn @click="refresh" icon="sync-alt" :loading="loading">
    åˆ·æ–°
  </plugin-btn>
  
  <!-- æˆåŠŸæŒ‰é’® -->
  <plugin-btn type="success" @click="save" icon="save">
    ä¿å­˜
  </plugin-btn>
  
  <!-- å±é™©æŒ‰é’® -->
  <plugin-btn type="danger" @click="delete" icon="trash">
    åˆ é™¤
  </plugin-btn>
  
  <!-- ç¦ç”¨æŒ‰é’® -->
  <plugin-btn :disabled="!canSubmit" @click="submit">
    æäº¤
  </plugin-btn>
  
  <!-- å…¨å®½æŒ‰é’® -->
  <plugin-btn type="primary" :block="true" @click="action">
    å…¨å®½æŒ‰é’®
  </plugin-btn>
</div>
```

---

## 5. ç”Ÿå‘½å‘¨æœŸé’©å­


### 5.1 ç”Ÿå‘½å‘¨æœŸæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ’ä»¶ç”Ÿå‘½å‘¨æœŸ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ç”¨æˆ·ç‚¹å‡»"è¿è¡Œ"æŒ‰é’®                                   â”‚
â”‚         â†“                                               â”‚
â”‚  2. è§£ææ’ä»¶ä»£ç  (window.PLUGIN)                        â”‚
â”‚         â†“                                               â”‚
â”‚  3. åˆå§‹åŒ–æ•°æ® (data() å‡½æ•°)                            â”‚
â”‚         â†“                                               â”‚
â”‚  4. ç»‘å®šæ–¹æ³• (methods å¯¹è±¡)                             â”‚
â”‚         â†“                                               â”‚
â”‚  5. æ¸²æŸ“æ¨¡æ¿ (template å­—ç¬¦ä¸²)                          â”‚
â”‚         â†“                                               â”‚
â”‚  6. è°ƒç”¨ mounted() é’©å­  â† å¯åœ¨æ­¤åˆå§‹åŒ–                  â”‚
â”‚         â†“                                               â”‚
â”‚  7. ç”¨æˆ·äº¤äº’é˜¶æ®µï¼ˆæ–¹æ³•è°ƒç”¨ã€æ•°æ®æ›´æ–°ï¼‰                    â”‚
â”‚         â†“                                               â”‚
â”‚  8. ç”¨æˆ·å…³é—­æ’ä»¶å¼¹çª—                                     â”‚
â”‚         â†“                                               â”‚
â”‚  9. è°ƒç”¨ destroyed() é’©å­  â† å¯åœ¨æ­¤ä¿å­˜çŠ¶æ€              â”‚
â”‚         â†“                                               â”‚
â”‚  10. è‡ªåŠ¨æ¸…ç†å®šæ—¶å™¨                                      â”‚
â”‚         â†“                                               â”‚
â”‚  11. æ¸…ç†Vueå®ä¾‹å’Œæ•°æ®                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 mounted é’©å­

æ’ä»¶åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œï¼Œé€‚åˆï¼š
- åŠ è½½åˆå§‹æ•°æ®
- ä»å­˜å‚¨æ¢å¤é…ç½®
- å¯åŠ¨åˆå§‹åŒ–ä»»åŠ¡

```javascript
async mounted() {
  console.log('æ’ä»¶å·²åŠ è½½')
  
  // ä»å­˜å‚¨åŠ è½½é…ç½®
  const config = await this.$api.storage.get('config', null)
  if (config) {
    this.$data.setting1 = config.setting1
    this.$data.setting2 = config.setting2
    this.$refresh()
  }
  
  // æ‰§è¡Œåˆå§‹åŒ–
  await this.loadData()
}
```

### 5.3 destroyed é’©å­

æ’ä»¶å…³é—­å‰æ‰§è¡Œï¼Œé€‚åˆï¼š
- ä¿å­˜ç”¨æˆ·é…ç½®
- æ¸…ç†èµ„æº
- è®°å½•çŠ¶æ€

```javascript
destroyed() {
  console.log('æ’ä»¶å³å°†å…³é—­')
  
  // ä¿å­˜é…ç½®åˆ°å­˜å‚¨
  this.$api.storage.set('config', {
    setting1: this.$data.setting1,
    setting2: this.$data.setting2
  })
  
  // æ³¨æ„ï¼šå®šæ—¶å™¨ä¼šè‡ªåŠ¨æ¸…ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†
}
```

### 5.4 å®šæ—¶å™¨ç®¡ç†

ä½¿ç”¨ `$api.$setInterval` å’Œ `$api.$setTimeout` åˆ›å»ºçš„å®šæ—¶å™¨ä¼šåœ¨æ’ä»¶å…³é—­æ—¶è‡ªåŠ¨æ¸…ç†ã€‚

```javascript
methods: {
  startAutoRefresh() {
    // ä½¿ç”¨ $api.$setInterval è€ŒéåŸç”Ÿ setInterval
    this.$data.timerId = this.$api.$setInterval(() => {
      this.refresh()
    }, 5000)
  },
  
  stopAutoRefresh() {
    if (this.$data.timerId) {
      this.$api.$clearInterval(this.$data.timerId)
      this.$data.timerId = null
    }
  }
}

// destroyed é’©å­ä¸­æ— éœ€æ‰‹åŠ¨æ¸…ç†å®šæ—¶å™¨
destroyed() {
  // å®šæ—¶å™¨è‡ªåŠ¨æ¸…ç†
  console.log('æ’ä»¶å…³é—­ï¼Œå®šæ—¶å™¨å·²è‡ªåŠ¨æ¸…ç†')
}
```

**å®šæ—¶å™¨APIï¼š**

| API | è¯´æ˜ |
|-----|------|
| `this.$api.$setInterval(fn, ms)` | åˆ›å»ºå¯è¿½è¸ªçš„å®šæ—¶å™¨ |
| `this.$api.$setTimeout(fn, ms)` | åˆ›å»ºå¯è¿½è¸ªçš„å»¶æ—¶å™¨ |
| `this.$api.$clearInterval(id)` | æ¸…é™¤å®šæ—¶å™¨ |
| `this.$api.$clearTimeout(id)` | æ¸…é™¤å»¶æ—¶å™¨ |

---

## 6. æŒä¹…åŒ–å­˜å‚¨

### 6.1 å­˜å‚¨æ¦‚è¿°

æ’ä»¶å­˜å‚¨ç³»ç»Ÿå…è®¸ä¿å­˜å’Œè¯»å–JSONæ ¼å¼çš„æ•°æ®ï¼Œæ•°æ®å­˜å‚¨åœ¨è®¾å¤‡æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚

**å­˜å‚¨ä½ç½®ï¼š** `/home/root/6677/Plugins/data/<æ’ä»¶å>.json`

### 6.2 Storage API

```javascript
// è·å–å€¼
this.$api.storage.get(key: string, defaultValue?: any): Promise<any>

// è®¾ç½®å€¼
this.$api.storage.set(key: string, value: any): Promise<boolean>

// åˆ é™¤å€¼
this.$api.storage.remove(key: string): Promise<boolean>

// è·å–æ‰€æœ‰æ•°æ®
this.$api.storage.getAll(): Promise<object>

// æ¸…ç©ºæ‰€æœ‰æ•°æ®
this.$api.storage.clear(): Promise<boolean>
```

### 6.3 ä½¿ç”¨ç¤ºä¾‹

```javascript
methods: {
  // ä¿å­˜é…ç½®
  async saveConfig() {
    const config = {
      refreshInterval: this.$data.refreshInterval,
      threshold: this.$data.threshold,
      enabled: this.$data.enabled
    }
    const success = await this.$api.storage.set('config', config)
    this.$api.toast(success ? 'é…ç½®å·²ä¿å­˜' : 'ä¿å­˜å¤±è´¥', success ? 'success' : 'error')
  },
  
  // åŠ è½½é…ç½®
  async loadConfig() {
    const config = await this.$api.storage.get('config', null)
    if (config) {
      this.$data.refreshInterval = config.refreshInterval || 5
      this.$data.threshold = config.threshold || 80
      this.$data.enabled = config.enabled || false
      this.$refresh()
      this.$api.toast('é…ç½®å·²åŠ è½½', 'success')
    }
  },
  
  // ä¿å­˜å•ä¸ªå€¼
  async saveValue() {
    await this.$api.storage.set('lastInput', this.$data.inputText)
  },
  
  // è¯»å–å•ä¸ªå€¼
  async loadValue() {
    const value = await this.$api.storage.get('lastInput', 'é»˜è®¤å€¼')
    this.$data.inputText = value
    this.$refresh()
  },
  
  // æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨æ•°æ®
  async viewAllData() {
    const all = await this.$api.storage.getAll()
    console.log('æ‰€æœ‰å­˜å‚¨æ•°æ®:', all)
  },
  
  // æ¸…ç©ºå­˜å‚¨
  async clearAllData() {
    const ok = await this.$api.confirm('ç¡®è®¤', 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å­˜å‚¨æ•°æ®å—ï¼Ÿ')
    if (ok) {
      await this.$api.storage.clear()
      this.$api.toast('æ•°æ®å·²æ¸…ç©º', 'success')
    }
  }
},

// åœ¨mountedä¸­è‡ªåŠ¨åŠ è½½
async mounted() {
  await this.loadConfig()
},

// åœ¨destroyedä¸­è‡ªåŠ¨ä¿å­˜
destroyed() {
  this.$api.storage.set('config', {
    refreshInterval: this.$data.refreshInterval,
    threshold: this.$data.threshold
  })
}
```

### 6.4 å­˜å‚¨æ•°æ®ç»“æ„ç¤ºä¾‹

```json
{
  "config": {
    "refreshInterval": 5,
    "threshold": 80,
    "enabled": true
  },
  "lastInput": "ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬",
  "history": [
    { "time": "2024-01-01", "action": "refresh" },
    { "time": "2024-01-02", "action": "save" }
  ]
}
```

---

## 7. å®Œæ•´ç¤ºä¾‹


### 7.1 ç®€å•æ’ä»¶ç¤ºä¾‹

```javascript
/**
 * Hello World æ’ä»¶
 * æœ€ç®€å•çš„æ’ä»¶ç¤ºä¾‹
 */
window.PLUGIN = {
  name: 'Hello World',
  version: '1.0.0',
  author: 'Demo',
  description: 'ä¸€ä¸ªç®€å•çš„Hello Worldæ’ä»¶',
  icon: 'fa-hand-wave',
  color: 'from-green-500 to-teal-400',
  
  template: `
    <div class="space-y-4">
      <div class="text-center py-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">
          {{ greeting }}
        </h2>
        <p class="text-slate-500 dark:text-white/50">{{ message }}</p>
      </div>
      
      <div class="flex gap-2 justify-center">
        <button @click="sayHello">æ‰“æ‹›å‘¼</button>
        <button @click="getSystemInfo">ç³»ç»Ÿä¿¡æ¯</button>
      </div>
    </div>
  `,
  
  data() {
    return {
      greeting: 'Hello, World!',
      message: 'ç‚¹å‡»æŒ‰é’®å¼€å§‹'
    }
  },
  
  methods: {
    sayHello() {
      this.$data.greeting = 'ä½ å¥½ï¼Œä¸–ç•Œï¼'
      this.$data.message = 'æ¬¢è¿ä½¿ç”¨æ’ä»¶ç³»ç»Ÿ'
      this.$refresh()
      this.$api.toast('Hello!', 'success')
    },
    
    async getSystemInfo() {
      const info = await this.$api.shell('uname -a')
      this.$data.message = info
      this.$refresh()
    }
  },
  
  mounted() {
    console.log('Hello World æ’ä»¶å·²åŠ è½½')
  }
}
```

### 7.2 ç³»ç»Ÿç›‘æ§æ’ä»¶ç¤ºä¾‹

```javascript
/**
 * ç³»ç»Ÿç›‘æ§æ’ä»¶
 * å±•ç¤ºUIç»„ä»¶å’Œå®šæ—¶å™¨åŠŸèƒ½
 */
window.PLUGIN = {
  name: 'ç³»ç»Ÿç›‘æ§',
  version: '2.0.0',
  author: 'Admin',
  description: 'å®æ—¶ç›‘æ§ç³»ç»ŸCPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ',
  icon: 'fa-chart-line',
  color: 'from-blue-500 to-indigo-500',
  
  template: `
    <div class="space-y-4">
      <!-- çŠ¶æ€å¡ç‰‡ -->
      <plugin-card title="ç³»ç»ŸçŠ¶æ€" icon="server" :loading="loading">
        <div class="space-y-2">
          <plugin-status label="CPUä½¿ç”¨ç‡" :value="cpu" unit="%" :status="cpuStatus" />
          <plugin-status label="å†…å­˜ä½¿ç”¨" :value="memory" unit="%" :status="memStatus" />
          <plugin-status label="ç£ç›˜ä½¿ç”¨" :value="disk" unit="%" :status="diskStatus" />
          <plugin-status label="è¿è¡Œæ—¶é—´" :value="uptime" status="default" />
        </div>
      </plugin-card>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <div class="flex flex-wrap gap-2">
        <plugin-btn @click="refresh" :loading="loading" icon="sync-alt">åˆ·æ–°</plugin-btn>
        <plugin-btn type="success" @click="startAuto" :disabled="autoRefresh" icon="play">
          è‡ªåŠ¨åˆ·æ–°
        </plugin-btn>
        <plugin-btn type="danger" @click="stopAuto" :disabled="!autoRefresh" icon="stop">
          åœæ­¢
        </plugin-btn>
      </div>
      
      <!-- çŠ¶æ€æç¤º -->
      <div class="text-center text-sm text-slate-500 dark:text-white/50">
        {{ autoRefresh ? 'è‡ªåŠ¨åˆ·æ–°ä¸­...' : 'æ‰‹åŠ¨æ¨¡å¼' }} | åˆ·æ–°æ¬¡æ•°: {{ count }}
      </div>
    </div>
  `,
  
  data() {
    return {
      cpu: 0,
      memory: 0,
      disk: 0,
      uptime: '-',
      loading: false,
      autoRefresh: false,
      count: 0,
      timerId: null
    }
  },
  
  computed: {
    cpuStatus() {
      if (this.cpu >= 90) return 'error'
      if (this.cpu >= 70) return 'warning'
      return 'success'
    },
    memStatus() {
      if (this.memory >= 90) return 'error'
      if (this.memory >= 70) return 'warning'
      return 'success'
    },
    diskStatus() {
      if (this.disk >= 90) return 'error'
      if (this.disk >= 70) return 'warning'
      return 'success'
    }
  },
  
  methods: {
    async refresh() {
      this.$data.loading = true
      this.$refresh()
      
      try {
        // CPU
        const cpuResult = await this.$api.shell("top -bn1 | grep 'Cpu(s)' | awk '{print $2}'")
        this.$data.cpu = parseFloat(cpuResult) || 0
        
        // å†…å­˜
        const memResult = await this.$api.shell("free | grep Mem | awk '{printf \"%.1f\", $3/$2 * 100}'")
        this.$data.memory = parseFloat(memResult) || 0
        
        // ç£ç›˜
        const diskResult = await this.$api.shell("df / | tail -1 | awk '{print $5}' | tr -d '%'")
        this.$data.disk = parseInt(diskResult) || 0
        
        // è¿è¡Œæ—¶é—´
        this.$data.uptime = await this.$api.shell("uptime -p | sed 's/up //'")
        
        this.$data.count++
      } catch (e) {
        this.$api.toast('è·å–æ•°æ®å¤±è´¥', 'error')
      }
      
      this.$data.loading = false
      this.$refresh()
    },
    
    startAuto() {
      this.$data.autoRefresh = true
      this.$data.timerId = this.$api.$setInterval(() => {
        this.refresh()
      }, 5000)
      this.$refresh()
      this.$api.toast('è‡ªåŠ¨åˆ·æ–°å·²å¯åŠ¨', 'success')
    },
    
    stopAuto() {
      if (this.$data.timerId) {
        this.$api.$clearInterval(this.$data.timerId)
        this.$data.timerId = null
      }
      this.$data.autoRefresh = false
      this.$refresh()
      this.$api.toast('è‡ªåŠ¨åˆ·æ–°å·²åœæ­¢', 'info')
    }
  },
  
  mounted() {
    this.refresh()
  },
  
  destroyed() {
    // å®šæ—¶å™¨è‡ªåŠ¨æ¸…ç†
    console.log('ç³»ç»Ÿç›‘æ§æ’ä»¶å·²å…³é—­')
  }
}
```

### 7.3 é…ç½®ç®¡ç†æ’ä»¶ç¤ºä¾‹

```javascript
/**
 * é…ç½®ç®¡ç†æ’ä»¶
 * å±•ç¤ºæŒä¹…åŒ–å­˜å‚¨åŠŸèƒ½
 */
window.PLUGIN = {
  name: 'é…ç½®ç®¡ç†',
  version: '1.0.0',
  author: 'Admin',
  description: 'æ¼”ç¤ºæŒä¹…åŒ–å­˜å‚¨APIçš„ä½¿ç”¨',
  icon: 'fa-database',
  color: 'from-violet-500 to-purple-500',
  
  template: `
    <div class="space-y-4">
      <!-- é…ç½®è¡¨å• -->
      <plugin-card title="é…ç½®é¡¹" icon="cog">
        <div class="space-y-3">
          <div>
            <label class="block text-sm text-slate-600 dark:text-white/60 mb-1">æœåŠ¡å™¨åœ°å€</label>
            <input v-model="serverUrl" type="text" placeholder="http://example.com" 
              class="w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-white/10 
                     bg-white dark:bg-white/5 text-slate-900 dark:text-white" />
          </div>
          <div>
            <label class="block text-sm text-slate-600 dark:text-white/60 mb-1">åˆ·æ–°é—´éš”(ç§’)</label>
            <input v-model="interval" type="number" min="1" max="60"
              class="w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-white/10 
                     bg-white dark:bg-white/5 text-slate-900 dark:text-white" />
          </div>
          <div class="flex items-center space-x-2">
            <input v-model="enabled" type="checkbox" id="enabled" class="rounded" />
            <label for="enabled" class="text-sm text-slate-600 dark:text-white/60">å¯ç”¨åŠŸèƒ½</label>
          </div>
        </div>
      </plugin-card>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <div class="flex flex-wrap gap-2">
        <plugin-btn type="success" @click="saveConfig" icon="save">ä¿å­˜é…ç½®</plugin-btn>
        <plugin-btn type="default" @click="loadConfig" icon="download">åŠ è½½é…ç½®</plugin-btn>
        <plugin-btn type="danger" @click="clearConfig" icon="trash">æ¸…ç©ºé…ç½®</plugin-btn>
      </div>
      
      <!-- å­˜å‚¨çŠ¶æ€ -->
      <plugin-card title="å­˜å‚¨æ•°æ®" icon="database" :collapsible="true">
        <pre class="text-xs text-slate-600 dark:text-white/60 overflow-auto max-h-40">{{ storageData }}</pre>
      </plugin-card>
    </div>
  `,
  
  data() {
    return {
      serverUrl: 'http://localhost:8080',
      interval: 5,
      enabled: false,
      storageData: '{}'
    }
  },
  
  methods: {
    async saveConfig() {
      const config = {
        serverUrl: this.$data.serverUrl,
        interval: this.$data.interval,
        enabled: this.$data.enabled,
        savedAt: new Date().toISOString()
      }
      const success = await this.$api.storage.set('config', config)
      if (success) {
        this.$api.toast('é…ç½®å·²ä¿å­˜', 'success')
        await this.viewStorage()
      } else {
        this.$api.toast('ä¿å­˜å¤±è´¥', 'error')
      }
    },
    
    async loadConfig() {
      const config = await this.$api.storage.get('config', null)
      if (config) {
        this.$data.serverUrl = config.serverUrl || ''
        this.$data.interval = config.interval || 5
        this.$data.enabled = config.enabled || false
        this.$refresh()
        this.$api.toast('é…ç½®å·²åŠ è½½', 'success')
      } else {
        this.$api.toast('æ²¡æœ‰ä¿å­˜çš„é…ç½®', 'info')
      }
    },
    
    async clearConfig() {
      const ok = await this.$api.confirm('ç¡®è®¤', 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰é…ç½®å—ï¼Ÿ')
      if (ok) {
        await this.$api.storage.clear()
        this.$data.serverUrl = ''
        this.$data.interval = 5
        this.$data.enabled = false
        this.$data.storageData = '{}'
        this.$refresh()
        this.$api.toast('é…ç½®å·²æ¸…ç©º', 'success')
      }
    },
    
    async viewStorage() {
      const all = await this.$api.storage.getAll()
      this.$data.storageData = JSON.stringify(all, null, 2)
      this.$refresh()
    }
  },
  
  async mounted() {
    await this.loadConfig()
    await this.viewStorage()
  },
  
  destroyed() {
    // è‡ªåŠ¨ä¿å­˜é…ç½®
    this.$api.storage.set('config', {
      serverUrl: this.$data.serverUrl,
      interval: this.$data.interval,
      enabled: this.$data.enabled
    })
  }
}
```

---

## 8. æœ€ä½³å®è·µ


### 8.1 ä»£ç ç»„ç»‡

```javascript
window.PLUGIN = {
  // 1. å…ƒæ•°æ®æ”¾åœ¨æœ€å‰é¢
  name: '...',
  version: '...',
  author: '...',
  description: '...',
  icon: '...',
  color: '...',
  
  // 2. æ¨¡æ¿ç´§éšå…¶å
  template: `...`,
  
  // 3. æ•°æ®å®šä¹‰
  data() { return { ... } },
  
  // 4. è®¡ç®—å±æ€§
  computed: { ... },
  
  // 5. æ–¹æ³•å®šä¹‰
  methods: { ... },
  
  // 6. ç”Ÿå‘½å‘¨æœŸé’©å­æ”¾æœ€å
  mounted() { ... },
  destroyed() { ... }
}
```

### 8.2 æ•°æ®è®¿é—®è§„èŒƒ

```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ this.$data è®¿é—®æ•°æ®
this.$data.loading = true
this.$data.message = 'Hello'

// âœ… æ­£ç¡®ï¼šä¿®æ”¹åè°ƒç”¨ $refresh æ›´æ–°UI
this.$data.count++
this.$refresh()

// âŒ é”™è¯¯ï¼šç›´æ¥ä½¿ç”¨ this.xxxï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸å·¥ä½œï¼‰
this.loading = true  // ä¸æ¨è
```

### 8.3 å¼‚æ­¥æ“ä½œå¤„ç†

```javascript
methods: {
  // âœ… æ­£ç¡®ï¼šä½¿ç”¨ async/await
  async fetchData() {
    this.$data.loading = true
    this.$refresh()
    
    try {
      const result = await this.$api.shell('some command')
      this.$data.result = result
      this.$api.toast('æˆåŠŸ', 'success')
    } catch (e) {
      this.$api.toast('å¤±è´¥: ' + e.message, 'error')
    } finally {
      this.$data.loading = false
      this.$refresh()
    }
  }
}
```

### 8.4 å®šæ—¶å™¨ä½¿ç”¨è§„èŒƒ

```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ $api çš„å®šæ—¶å™¨æ–¹æ³•
this.$data.timerId = this.$api.$setInterval(() => {
  this.refresh()
}, 5000)

// âœ… æ­£ç¡®ï¼šæ¸…ç†æ—¶ä½¿ç”¨å¯¹åº”æ–¹æ³•
this.$api.$clearInterval(this.$data.timerId)

// âŒ é”™è¯¯ï¼šä½¿ç”¨åŸç”Ÿå®šæ—¶å™¨ï¼ˆä¸ä¼šè‡ªåŠ¨æ¸…ç†ï¼‰
setInterval(() => { ... }, 5000)  // ä¸æ¨è
```

### 8.5 å­˜å‚¨ä½¿ç”¨è§„èŒƒ

```javascript
// âœ… æ­£ç¡®ï¼šå­˜å‚¨å¤æ‚å¯¹è±¡
await this.$api.storage.set('config', {
  setting1: value1,
  setting2: value2
})

// âœ… æ­£ç¡®ï¼šæä¾›é»˜è®¤å€¼
const config = await this.$api.storage.get('config', {
  setting1: 'default1',
  setting2: 'default2'
})

// âœ… æ­£ç¡®ï¼šåœ¨ mounted ä¸­åŠ è½½ï¼Œdestroyed ä¸­ä¿å­˜
async mounted() {
  const saved = await this.$api.storage.get('state', null)
  if (saved) { /* æ¢å¤çŠ¶æ€ */ }
},
destroyed() {
  this.$api.storage.set('state', { /* å½“å‰çŠ¶æ€ */ })
}
```

### 8.6 UIç»„ä»¶ä½¿ç”¨è§„èŒƒ

```html
<!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨ç»„ä»¶ç®€åŒ–ä»£ç  -->
<plugin-card title="æ ‡é¢˜" icon="cog" :loading="loading">
  <plugin-status label="CPU" :value="cpu" unit="%" :status="cpuStatus" />
  <plugin-btn @click="refresh" icon="sync">åˆ·æ–°</plugin-btn>
</plugin-card>

<!-- âŒ ä¸æ¨èï¼šæ‰‹å†™å¤§é‡Tailwindç±» -->
<div class="rounded-xl bg-slate-100 dark:bg-white/5 border...">
  <div class="flex items-center...">...</div>
</div>
```

### 8.7 é”™è¯¯å¤„ç†

```javascript
methods: {
  async riskyOperation() {
    try {
      const result = await this.$api.shell('risky command')
      // å¤„ç†æˆåŠŸ
    } catch (e) {
      console.error('æ“ä½œå¤±è´¥:', e)
      this.$api.toast('æ“ä½œå¤±è´¥: ' + e.message, 'error')
    }
  }
}
```

### 8.8 ç”¨æˆ·ç¡®è®¤

```javascript
methods: {
  async dangerousAction() {
    // å±é™©æ“ä½œå‰å…ˆç¡®è®¤
    const ok = await this.$api.confirm('è­¦å‘Š', 'æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œç¡®å®šç»§ç»­ï¼Ÿ')
    if (!ok) return
    
    // æ‰§è¡Œæ“ä½œ
    await this.$api.shell('dangerous command')
    this.$api.toast('æ“ä½œå®Œæˆ', 'success')
  }
}
```

---

## é™„å½•Aï¼šå¸¸ç”¨Shellå‘½ä»¤

```javascript
// ç³»ç»Ÿä¿¡æ¯
await this.$api.shell('uname -a')                    // ç³»ç»Ÿç‰ˆæœ¬
await this.$api.shell('cat /etc/os-release')         // å‘è¡Œç‰ˆä¿¡æ¯
await this.$api.shell('hostname')                    // ä¸»æœºå

// CPUä¿¡æ¯
await this.$api.shell("top -bn1 | grep 'Cpu(s)' | awk '{print $2}'")  // CPUä½¿ç”¨ç‡
await this.$api.shell('cat /proc/cpuinfo | grep processor | wc -l')   // CPUæ ¸å¿ƒæ•°

// å†…å­˜ä¿¡æ¯
await this.$api.shell("free | grep Mem | awk '{printf \"%.1f\", $3/$2 * 100}'")  // å†…å­˜ä½¿ç”¨ç‡
await this.$api.shell("free -h | grep Mem | awk '{print $2}'")                    // æ€»å†…å­˜

// ç£ç›˜ä¿¡æ¯
await this.$api.shell("df / | tail -1 | awk '{print $5}' | tr -d '%'")  // æ ¹åˆ†åŒºä½¿ç”¨ç‡
await this.$api.shell("df -h / | tail -1 | awk '{print $2}'")            // æ ¹åˆ†åŒºæ€»å¤§å°

// ç½‘ç»œä¿¡æ¯
await this.$api.shell('ip addr show')                // IPåœ°å€
await this.$api.shell('cat /etc/resolv.conf')        // DNSé…ç½®

// è¿›ç¨‹ç®¡ç†
await this.$api.shell('ps aux | head -20')           // è¿›ç¨‹åˆ—è¡¨
await this.$api.shell('pgrep -f "process_name"')     // æŸ¥æ‰¾è¿›ç¨‹

// æ–‡ä»¶æ“ä½œ
await this.$api.shell('ls -la /path/to/dir')         // åˆ—å‡ºç›®å½•
await this.$api.shell('cat /path/to/file')           // è¯»å–æ–‡ä»¶
await this.$api.shell('echo "content" > /path/file') // å†™å…¥æ–‡ä»¶
```

---

## é™„å½•Bï¼šFontAwesomeå›¾æ ‡å‚è€ƒ

å¸¸ç”¨å›¾æ ‡åç§°ï¼ˆä½¿ç”¨æ—¶å»æ‰ `fa-` å‰ç¼€ï¼‰ï¼š

| å›¾æ ‡ | åç§° | ç”¨é€” |
|------|------|------|
| ğŸ”§ | `cog` / `cogs` | è®¾ç½® |
| ğŸ“Š | `chart-line` / `chart-bar` | å›¾è¡¨ |
| ğŸ’¾ | `save` / `database` | ä¿å­˜/æ•°æ®åº“ |
| ğŸ”„ | `sync-alt` / `redo` | åˆ·æ–° |
| â–¶ï¸ | `play` / `play-circle` | æ’­æ”¾/å¯åŠ¨ |
| â¹ï¸ | `stop` / `stop-circle` | åœæ­¢ |
| ğŸ—‘ï¸ | `trash` / `trash-alt` | åˆ é™¤ |
| âœï¸ | `edit` / `pen` | ç¼–è¾‘ |
| â• | `plus` / `plus-circle` | æ·»åŠ  |
| âŒ | `times` / `times-circle` | å…³é—­ |
| âœ… | `check` / `check-circle` | ç¡®è®¤ |
| âš ï¸ | `exclamation-triangle` | è­¦å‘Š |
| â„¹ï¸ | `info-circle` | ä¿¡æ¯ |
| ğŸ–¥ï¸ | `server` / `desktop` | æœåŠ¡å™¨ |
| ğŸ“ | `folder` / `folder-open` | æ–‡ä»¶å¤¹ |
| ğŸ“„ | `file` / `file-alt` | æ–‡ä»¶ |
| ğŸ”’ | `lock` / `unlock` | é”å®š |
| ğŸ‘¤ | `user` / `users` | ç”¨æˆ· |
| ğŸŒ | `globe` / `network-wired` | ç½‘ç»œ |
| â° | `clock` / `history` | æ—¶é—´ |

---

## é™„å½•Cï¼šTailwindæ¸å˜è‰²å‚è€ƒ

```javascript
// è“è‰²ç³»
color: 'from-blue-500 to-cyan-400'
color: 'from-blue-600 to-indigo-500'

// ç´«è‰²ç³»
color: 'from-violet-500 to-purple-500'
color: 'from-purple-500 to-pink-500'

// ç»¿è‰²ç³»
color: 'from-green-500 to-teal-400'
color: 'from-emerald-500 to-cyan-400'

// çº¢è‰²ç³»
color: 'from-red-500 to-orange-400'
color: 'from-rose-500 to-pink-500'

// é»„è‰²ç³»
color: 'from-yellow-500 to-orange-400'
color: 'from-amber-500 to-yellow-400'

// ç°è‰²ç³»
color: 'from-slate-500 to-gray-400'
color: 'from-zinc-500 to-slate-400'
```

---

## é™„å½•Dï¼šAIæç¤ºè¯æ¨¡æ¿

å½“éœ€è¦AIå¸®åŠ©ç¼–å†™æ’ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æç¤ºè¯ï¼š

```
è¯·å¸®æˆ‘ç¼–å†™ä¸€ä¸ªæ’ä»¶å•†åŸæ’ä»¶ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š

1. æ’ä»¶åç§°ï¼š[åç§°]
2. åŠŸèƒ½æè¿°ï¼š[è¯¦ç»†æè¿°æ’ä»¶åŠŸèƒ½]
3. éœ€è¦çš„æ•°æ®ï¼š[åˆ—å‡ºéœ€è¦æ˜¾ç¤º/å­˜å‚¨çš„æ•°æ®]
4. éœ€è¦çš„æ“ä½œï¼š[åˆ—å‡ºç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„æ“ä½œ]
5. æ˜¯å¦éœ€è¦å®šæ—¶åˆ·æ–°ï¼š[æ˜¯/å¦ï¼Œå¦‚æœæ˜¯è¯·è¯´æ˜é—´éš”]
6. æ˜¯å¦éœ€è¦æŒä¹…åŒ–å­˜å‚¨ï¼š[æ˜¯/å¦ï¼Œå¦‚æœæ˜¯è¯·è¯´æ˜å­˜å‚¨å†…å®¹]

è¯·ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯ï¼š
- UIç»„ä»¶ï¼šplugin-card, plugin-status, plugin-btn
- ç”Ÿå‘½å‘¨æœŸï¼šmounted, destroyed
- å­˜å‚¨APIï¼šthis.$api.storage
- å®šæ—¶å™¨ï¼šthis.$api.$setInterval

è¯·ç¡®ä¿ä»£ç ç¬¦åˆæ’ä»¶å¼€å‘è§„èŒƒï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆã€‚
```

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼š2.0.0 | æœ€åæ›´æ–°ï¼š2025å¹´*